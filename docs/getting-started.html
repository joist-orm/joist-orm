<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-getting-started/installation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.0">
<title data-rh="true">Installation | Joist</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://joist-orm.io/docs/getting-started"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="TypeScript, ORM, Reactivity, Domain Driven Design, Unit of Work, ActiveRecord"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Installation | Joist"><meta data-rh="true" name="description" content="Installing Joist in your project has four main steps:"><meta data-rh="true" property="og:description" content="Installing Joist in your project has four main steps:"><link data-rh="true" rel="canonical" href="https://joist-orm.io/docs/getting-started"><link data-rh="true" rel="alternate" href="https://joist-orm.io/docs/getting-started" hreflang="en"><link data-rh="true" rel="alternate" href="https://joist-orm.io/docs/getting-started" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.37bfbcff.css">
<script src="/assets/js/runtime~main.e0e95bc5.js" defer="defer"></script>
<script src="/assets/js/main.0992c96b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Joist</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/goals">Goals</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/modeling/fields">Domain Modeling</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/features/entity-manager">Features</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/testing/test-factories">Testing</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/joist-orm/joist-orm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.youtube.com/@joist-orm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/ky9VTQugqu" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/getting-started/tour">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/tour">Quick Tour</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting-started">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/schema-assumptions">Schema Assumptions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration">Configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/goals">Goals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/modeling/fields">Domain Modeling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/features/entity-manager">Features</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/advanced/unit-of-work">Advanced Features</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/testing/test-factories">Testing</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="docItemContainer_tjFy"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sfvy"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting Started</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Installation</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Installation</h1></header><p>Installing Joist in your project has four main steps:</p>
<ol>
<li>Setting up your database</li>
<li>Setting up <code>joist-codegen</code></li>
<li>Setting up your tests</li>
<li>Setting up your production code</li>
</ol>
<p>A wrinkle is that each Node.js application can be pretty different, in terms of how you manage your local database (i.e. with Docker Compose), what your production application looks like (a REST API, a GraphQL API, etc.), etc.</p>
<p>So, to simplify this page, we&#x27;ll include some assumptions based on the <a href="https://github.com/joist-orm/joist-orm-sample">Joist sample app</a>, but you should be able to adjust these steps to your specific project.</p>
<admonition type="info"><p>If you want a faster intro than this page, you should be able to check out the sample app, run the commands in its readme, and just start poking around.</p></admonition>
<admonition type="info"><p>Joist requires Node 18.</p></admonition>
<h2 id="setting-up-your-database">Setting up your database</h2>
<p>The sample app uses <code>docker compose</code> and a <code>db.dockerfile</code> file to manage the local Postgres database.</p>
<p>To start it, clone the <a href="https://github.com/joist-orm/joist-orm-sample">sample app</a>, and run:</p>
<pre><code class="language-bash">docker compose build db
docker compose up -d db
</code></pre>
<p>The <code>docker-compose.yml</code> exposes the <code>sample_app</code> database on port <code>5342</code>, so it is accessible with an environment variable of:</p>
<pre><code class="language-env">DATABASE_URL=postgres://sample_user:local@localhost:5432/sample_app
</code></pre>
<p>The following steps will assume your database is available at this location (it is already set in the sample app&#x27;s <code>env/local.env</code> file), but you can set <code>DATABASE_URL</code> to whatever is appropriate for your application.</p>
<h3 id="setting-up-migrations">Setting up migrations</h3>
<p>You should also set up a migrations library to manage your database schema; the Joist sample app uses <a href="https://github.com/salsita/node-pg-migrate">node-pg-migrate</a>.</p>
<p>If you do use <code>node-pg-migrate</code> as well, you can install Joist&#x27;s <code>node-pg-migrate</code>-based helper methods (like <code>createEntityTable</code>, <code>createEnumTable</code>, <code>createManyToManyTable</code>, etc.):</p>
<pre><code class="language-bash">npm add --save-dev joist-migration-utils
</code></pre>
<p>And add <code>joist-migrate</code> and <code>joist-new-migration</code> commands to your <code>package.json</code>:</p>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;joist-migrate&quot;: &quot;env-cmd tsx ./node_modules/joist-migration-utils&quot;,
    &quot;joist-new-migration&quot;: &quot;npx node-pg-migrate create&quot;
  }
}
</code></pre>
<p>The sample app uses <code>env-cmd</code> to load the environment variables from <code>.env</code> before running <code>joist-migration-utils</code>, and <code>tsx</code> to transpile the migration&#x27;s <code>*.ts</code> code to JavaScript, but if you don&#x27;t like that, you can manage your application&#x27;s environment variables however you like.</p>
<admonition type="info"><p>Invoking Joist&#x27;s <code>joist-migration-utils</code> is really just a tiny wrapper around <code>node-pg-migrate</code> that:</p><ul>
<li>Reads the connection config from either a single <code>DATABASE_URL</code> or multiple <code>DB_HOST</code>, <code>DB_PORT</code>, <code>DB_DATABASE</code>, <code>DB_USER</code>, and <code>DB_PASSWORD</code> environment variables</li>
<li>Runs the &quot;up&quot; command against the <code>migrations/</code> directory</li>
</ul><p>If you want to invoke <code>node-pg-migrate</code>&#x27;s <a href="https://salsita.github.io/node-pg-migrate/#/cli">cli</a> directly instead, that&#x27;s just fine.</p></admonition>
<p>Now we can apply migrations by running:</p>
<pre><code class="language-bash">npm run joist-migrate
</code></pre>
<p>The sample app also supports resetting the database schema (so you can re-run the migrations from scratch) by running:</p>
<pre><code class="language-bash">docker compose exec db ./reset.sh
</code></pre>
<admonition type="tip"><p>While we used <code>node-pg-migrate</code> for this section, Joist is agnostic to your migration tool and will codegen based on your database schema, so you&#x27;re welcome to use <a href="https://github.com/salsita/node-pg-migrate">node-pg-migrate</a>, Knex&#x27;s <a href="http://knexjs.org/guide/migrations.html#migration-cli">migrations</a>, or another tool for migrations/schema management.</p></admonition>
<admonition type="tip"><p>As a quirk of <code>node-pg-migrate</code>, the first migration that it creates via <code>joist-new-migration</code> will always be a <code>.js</code> file.</p><p>Once you rename that first migration to a <code>.ts</code> file, all subsequent migrations will be created as <code>.ts</code> files.</p></admonition>
<h2 id="setting-up-joist-codegen">Setting up <code>joist-codegen</code></h2>
<p>Install the <code>joist-codegen</code> package as a dev dependency and add a <code>joist-codegen</code> script to your <code>package.json</code>:</p>
<pre><code class="language-shell">npm add --save-dev joist-codegen
</code></pre>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;joist-codegen&quot;: &quot;env-cmd tsx ./node_modules/joist-codegen&quot;
  }
}
</code></pre>
<p>This again uses <code>env-cmd</code>, as <code>joist-codegen</code> will use the <code>DATABASE_URL</code> environment variable to connect to your local database.</p>
<p>Now, anytime you make schema changes (i.e. by running <code>npm run joist-migrate</code>), you can also run <code>joist-codegen</code> to create/update your domain model:</p>
<pre><code class="language-bash">npm run joist-codegen
</code></pre>
<h2 id="setting-up-your-tests">Setting up your tests</h2>
<p>We want each test to get a clean/fresh database, so we should set up a <code>beforeEach</code> to invoke our local-only <code>flush_database</code> command:</p>
<p>The sample app does this via a <code>setupTests.ts</code> file that will be used for all tests:</p>
<pre><code class="language-typescript">import { EntityManager } from &quot;src/entities&quot;;
import { knex as createKnex, Knex } from &quot;knex&quot;;
import { PostgresDriver } from &quot;joist-orm&quot;;
import { newPgConnectionConfig } from &quot;joist-utils&quot;;

let knex: Knex;

// Knex is used as a single/global connection pool + query builder
function getKnex(): Knex {
  return (knex ??= createKnex({
    client: &quot;pg&quot;,
    connection: newPgConnectionConfig() as any,
    debug: false,
    asyncStackTraces: true,
  }));
}

export function newEntityManager(): EntityManager {
  return new EntityManager({}, new PostgresDriver(getKnex()));
}

beforeEach(async () =&gt; {
  const knex = await getKnex();
  await knex.select(knex.raw(&quot;flush_database()&quot;));
});

afterAll(async () =&gt; {
  if (knex) {
    await knex.destroy();
  }
});
</code></pre>
<p>The <code>newPgConnectionConfig</code> helper method from <code>joist-utils</code> also uses the <code>DATABASE_URL</code> environment variable, which we can have loaded into the Jest process by using <code>env-cmd</code> in a <code>setupTestEnv.js</code> file:</p>
<pre><code class="language-typescript">import { GetEnvVars } from &quot;env-cmd&quot;;

export default async function globalSetup() {
  Object.entries(await GetEnvVars()).forEach(([key, value]) =&gt; (process.env[key] = value));
};
</code></pre>
<p>And then configure <code>jest.config.js</code> to use both files:</p>
<pre><code class="language-javascript">module.exports = {
  preset: &quot;ts-jest&quot;,
  globalSetup: &quot;&lt;rootDir&gt;/src/setupTestEnv.ts&quot;,
  setupFilesAfterEnv: [&quot;&lt;rootDir&gt;/src/setupTests.ts&quot;],
  testMatch: [&quot;&lt;rootDir&gt;/src/**/*.test.{ts,tsx,js,jsx}&quot;],
  moduleNameMapper: {
    &quot;^src(.*)&quot;: &quot;&lt;rootDir&gt;/src$1&quot;,
  },
};
</code></pre>
<admonition type="info"><p>While Joist&#x27;s <code>newPgConnectionConfig</code> uses the same environment variable convention as <code>joist-codegen</code>, with the idea that your app&#x27;s production environment variables will be set automatically by your deployment infra (i.e. in the style of <a href="https://12factor.net/">Twelve Factor Applications</a>), you&#x27;re free to configure <code>Knex</code> with whatever idiomatic configuration looks like for your app.</p><p>See the <a href="http://knexjs.org/guide/#configuration-options">Knex config documentation</a>.</p></admonition>
<p>As usual, you can/should adjust all of this to your specific project.</p>
<p>Now your unit tests should be able to create an <code>EntityManager</code> and work with the domain objects:</p>
<pre><code class="language-ts">import { Author, EntityManager, newAuthor } from &quot;src/entities&quot;;
import { newEntityManager } from &quot;src/setupTests&quot;;

describe(&quot;Author&quot;, () =&gt; {
  it(&quot;can be created&quot;, async () =&gt; {
    const em = newEntityManager();
    const a = new Author(em, { firstName: &quot;a1&quot; });
    await em.flush();
  });
});
</code></pre>
<h2 id="setting-up-your-production-code">Setting up your production code</h2>
<p>Finally, you can use the <code>EntityManager</code> and your domain objects in your production code.</p>
<p>First install the <code>joist-orm</code> dependency:</p>
<pre><code class="language-bash">npm add --save-dev joist-orm
</code></pre>
<p>This is where the guide really becomes &quot;it depends on your application&quot;, but in theory it will look very similar to setting up the tests:</p>
<ol>
<li>Configure a single/global <code>knex</code> instance that will act as the connection pool,</li>
<li>For each request, create a new <code>EntityManager</code> to perform that request&#x27;s work</li>
</ol>
<p>An extremely simple example might look like:</p>
<pre><code class="language-ts">import { EntityManager, Author } from &quot;./entities&quot;;
import { newPgConnectionConfig, PostgresDriver } from &quot;joist-orm&quot;;
import { knex as createKnex, Knex } from &quot;knex&quot;;

// Create our global knex connection
let knex: Knex = createKnex({
  client: &quot;pg&quot;,
  connection: newPgConnectionConfig(),
  debug: false,
  asyncStackTraces: true,
});

// Create a helper method for our requests to create a new EntityManager
function newEntityManager(): EntityManager {
  // If you have a per-request context object, you can create that here
  const ctx = {};
  return new EntityManager(ctx, new PostgresDriver(getKnex()));
}

// Handle GET `/authors`
app.get(&quot;/authors&quot;, async (req, res) =&gt; {
  // Create a new em
  const em = newEntityManager();
  // Find all authors
  const authors = await em.find(Author, {});
  // Send them back as JSON
  res.send(authors);
});
</code></pre>
<p>Note that you&#x27;ll again need the <code>DATABASE_URL</code> environment variable set, but that will depend on whatever hosting provider you&#x27;re using to run the app (or, per the previous disclaimer, you&#x27;re free to configure the <code>Knex</code> connection pool with whatever configuration approach/library you like).</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/joist-orm/joist-orm/edit/main/docs/docs/getting-started/installation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_ydrU"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/getting-started/tour"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Quick Tour</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/getting-started/schema-assumptions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Schema Assumptions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setting-up-your-database" class="table-of-contents__link toc-highlight">Setting up your database</a><ul><li><a href="#setting-up-migrations" class="table-of-contents__link toc-highlight">Setting up migrations</a></li></ul></li><li><a href="#setting-up-joist-codegen" class="table-of-contents__link toc-highlight">Setting up <code>joist-codegen</code></a></li><li><a href="#setting-up-your-tests" class="table-of-contents__link toc-highlight">Setting up your tests</a></li><li><a href="#setting-up-your-production-code" class="table-of-contents__link toc-highlight">Setting up your production code</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/goals">Goals</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/joist-orm/joist-orm/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/ky9VTQugqu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024</div></div></div></footer></div>
</body>
</html>