---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

// Get all blog posts
const posts = await getCollection('blog');
---

<Layout title="Blog Debug">
  <div class="container mx-auto p-8">
    <h1 class="text-2xl font-bold mb-4">Blog Debug Information</h1>
    
    <div class="bg-gray-100 p-4 rounded mb-8">
      <h2 class="font-bold mb-2">All blog posts:</h2>
      <ul class="space-y-4">
        {posts.map(post => (
          <li class="border-b pb-2">
            <div><strong>ID:</strong> {post.id}</div>
            <div><strong>Title:</strong> {post.data.title}</div>
            <div><strong>Slug from frontmatter:</strong> {post.data.slug || 'Not set'}</div>
            <div><strong>Generated slug:</strong> {post.id.replace(/^\d{4}-\d{2}-\d{2}-/, '')}</div>
            <div><strong>Full path used in app:</strong> /blog/{post.data.slug || post.id.replace(/^\d{4}-\d{2}-\d{2}-/, '')}</div>
          </li>
        ))}
      </ul>
    </div>
  </div>
</Layout>